<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-x32.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-x16.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="veaTBtqt4ArdFO7yL4lECMYJsOeSwdptb1k8vJJBzMA"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://lyreal666.com").hostname,root:"/",scheme:"Pisces",version:"7.7.1",exturl:!0,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!0,style:"default"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="ç³»ç»Ÿï¼Œæ‰å®çš„ javascript è¯­è¨€åŸºç¡€æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»å…·å¤‡çš„ã€‚åœ¨çœ‹äº†ä¸€äº›å…³äº callï¼Œapplyï¼Œbind çš„æ–‡ç« åï¼Œæˆ‘è¿˜æ˜¯æ‰“ç®—å†™ä¸‹è¿™ç¯‡æ€»ç»“ï¼ŒåŸå› æœ‰å‡ ä¸ªã€‚é¦–å…ˆï¼Œåœ¨å¦‚ä»Š ES6 å¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œå¾ˆå¤šæ–‡ç« ä¸­è®²è¿°çš„å®ƒä»¬çš„åº”ç”¨åœºæ™¯å…¶å®ç”¨ ES6 å¯ä»¥æ›´ä¼˜é›…çš„è§£å†³ï¼Œä½†æ˜¯åŸºæœ¬ä¸ŠÂ·æ²¡æœ‰æ–‡ç« ä¼šå»æ ES6 çš„è§£æ³•ã€‚å†åˆ™ï¼Œè®²å®ƒä»¬çš„å®ç°åŸç†çš„æ–‡ç« å…¶å®ä¸å°‘ï¼Œä½†æ˜¯æˆ–å¤šæˆ–å°‘å®ç°çš„æœ‰äº›ä¸å¤Ÿå®Œç¾ï¼Œæœ¬æ–‡å°†æŠŠå®ƒä»¬"><meta property="og:type" content="article"><meta property="og:title" content="javascript åŸºç¡€ä¹‹ call, apply, bind"><meta property="og:url" content="https://lyreal666.com/javascript-%E5%9F%BA%E7%A1%80%E4%B9%8B-call-apply-bind/index.html"><meta property="og:site_name" content="ä½™è…¾é–çš„åšå®¢"><meta property="og:description" content="ç³»ç»Ÿï¼Œæ‰å®çš„ javascript è¯­è¨€åŸºç¡€æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»å…·å¤‡çš„ã€‚åœ¨çœ‹äº†ä¸€äº›å…³äº callï¼Œapplyï¼Œbind çš„æ–‡ç« åï¼Œæˆ‘è¿˜æ˜¯æ‰“ç®—å†™ä¸‹è¿™ç¯‡æ€»ç»“ï¼ŒåŸå› æœ‰å‡ ä¸ªã€‚é¦–å…ˆï¼Œåœ¨å¦‚ä»Š ES6 å¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œå¾ˆå¤šæ–‡ç« ä¸­è®²è¿°çš„å®ƒä»¬çš„åº”ç”¨åœºæ™¯å…¶å®ç”¨ ES6 å¯ä»¥æ›´ä¼˜é›…çš„è§£å†³ï¼Œä½†æ˜¯åŸºæœ¬ä¸ŠÂ·æ²¡æœ‰æ–‡ç« ä¼šå»æ ES6 çš„è§£æ³•ã€‚å†åˆ™ï¼Œè®²å®ƒä»¬çš„å®ç°åŸç†çš„æ–‡ç« å…¶å®ä¸å°‘ï¼Œä½†æ˜¯æˆ–å¤šæˆ–å°‘å®ç°çš„æœ‰äº›ä¸å¤Ÿå®Œç¾ï¼Œæœ¬æ–‡å°†æŠŠå®ƒä»¬"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.loli.net/2019/06/29/5d16c5b48ef8590170.png"><meta property="og:image" content="https://i.loli.net/2019/06/29/5d16d5a0b97eb35960.png"><meta property="og:image" content="https://i.loli.net/2019/06/29/5d16ec374162677354.png"><meta property="og:image" content="https://i.loli.net/2019/06/29/5d16fed23267568788.png"><meta property="article:published_time" content="2019-06-27T13:29:00.000Z"><meta property="article:modified_time" content="2020-03-10T14:23:24.598Z"><meta property="article:author" content="ä½™è…¾é–"><meta property="article:tag" content="javascript"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2019/06/29/5d16c5b48ef8590170.png"><link rel="canonical" href="https://lyreal666.com/javascript-%E5%9F%BA%E7%A1%80%E4%B9%8B-call-apply-bind/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>javascript åŸºç¡€ä¹‹ call, apply, bind | ä½™è…¾é–çš„åšå®¢</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="ä½™è…¾é–çš„åšå®¢" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">ä½™è…¾é–çš„åšå®¢</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-fw fa-link"></i>å‹é“¾</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="æœç´¢..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://lyreal666.com/javascript-%E5%9F%BA%E7%A1%80%E4%B9%8B-call-apply-bind/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="ä½™è…¾é–"><meta itemprop="description" content="æ€»ç»“å’Œåˆ†äº«æˆ‘çš„æ‰€å­¦æ‰€æ€"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="ä½™è…¾é–çš„åšå®¢"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">javascript åŸºç¡€ä¹‹ call, apply, bind</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-27 21:29:00" itemprop="dateCreated datePublished" datetime="2019-06-27T21:29:00+08:00">2019-06-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-10 22:23:24" itemprop="dateModified" datetime="2020-03-10T22:23:24+08:00">2020-03-10</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span> </a></span></span><span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>ç³»ç»Ÿï¼Œæ‰å®çš„ javascript è¯­è¨€åŸºç¡€æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»å…·å¤‡çš„ã€‚åœ¨çœ‹äº†ä¸€äº›å…³äº callï¼Œapplyï¼Œbind çš„æ–‡ç« åï¼Œæˆ‘è¿˜æ˜¯æ‰“ç®—å†™ä¸‹è¿™ç¯‡æ€»ç»“ï¼ŒåŸå› æœ‰å‡ ä¸ªã€‚é¦–å…ˆï¼Œåœ¨å¦‚ä»Š ES6 å¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œå¾ˆå¤šæ–‡ç« ä¸­è®²è¿°çš„å®ƒä»¬çš„åº”ç”¨åœºæ™¯å…¶å®ç”¨ ES6 å¯ä»¥æ›´ä¼˜é›…çš„è§£å†³ï¼Œä½†æ˜¯åŸºæœ¬ä¸ŠÂ·æ²¡æœ‰æ–‡ç« ä¼šå»æ ES6 çš„è§£æ³•ã€‚å†åˆ™ï¼Œè®²å®ƒä»¬çš„å®ç°åŸç†çš„æ–‡ç« å…¶å®ä¸å°‘ï¼Œä½†æ˜¯æˆ–å¤šæˆ–å°‘å®ç°çš„æœ‰äº›ä¸å¤Ÿå®Œç¾ï¼Œæœ¬æ–‡å°†æŠŠå®ƒä»¬é€šè¿‡ä»£ç ä¸€ä¸€æ¯”è¾ƒå®Œç¾çš„å®ç°ï¼Œè®©å®ƒä»¬ä¸å†ç¥ç§˜ã€‚ä¸è°¦è™šçš„è¯´ï¼Œå…³äº callï¼Œapplyï¼Œbind çš„çŸ¥è¯†ï¼Œçœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº†ã€‚</p><p>æ–‡ç« ä¸­çš„æºç åœ°å€ï¼š<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RqeDY2Ni9kZWVwLWluLWZlL3RyZWUvbWFzdGVyL3NyYy9jYWxsQXBwbHlCaW5k" title="https://github.com/tjx666/deep-in-fe/tree/master/src/callApplyBind">deep-in-fe<i class="fa fa-external-link"></i></span></p><a id="more"></a><h2 id="æ”¹å˜å‡½æ•°ä¸­-this-æŒ‡å‘çš„ä¸‰å…„å¼Ÿ"><a href="#æ”¹å˜å‡½æ•°ä¸­-this-æŒ‡å‘çš„ä¸‰å…„å¼Ÿ" class="headerlink" title="æ”¹å˜å‡½æ•°ä¸­ this æŒ‡å‘çš„ä¸‰å…„å¼Ÿ"></a>æ”¹å˜å‡½æ•°ä¸­ this æŒ‡å‘çš„ä¸‰å…„å¼Ÿ</h2><p>æˆ‘ä»¬çŸ¥é“åœ¨ javascript çš„ function ä¸­æœ‰ <code>this</code>ï¼Œ<code>arguments</code> ç­‰å…³é”®å­—ã€‚æœ¬æ–‡ä¸è®¨è®º this æŒ‡å‘é—®é¢˜ï¼Œé‚£ä¸ªéƒ½å¯ä»¥å•ç‹¬æ•´ä¸€ç¯‡æ–‡ç« äº†ã€‚ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯å½“ä½ ä½¿ç”¨ <code>.</code> æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæ­¤æ—¶å‡½æ•°ä¸­ this æŒ‡å‘ <code>.</code> å‰é¢çš„è°ƒç”¨è€…ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  name: <span class="string">'YuTengjing'</span>,</span><br><span class="line">  age: <span class="number">22</span>,</span><br><span class="line">  introduce() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hello everyone! My name is <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>. I'm <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old.`</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this æ­¤æ—¶æŒ‡å‘ person</span></span><br><span class="line"><span class="built_in">console</span>.log(person.introduce()); <span class="comment">// =&gt; Hello everyone! My name is YuTengjing. I'm 22 years old.</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ callï¼Œapplyï¼Œbind è¿™ä¸‰å…„å¼Ÿå¯ä»¥æ”¹å˜ <code>introduce</code> ä¸­ this çš„æŒ‡å‘ã€‚</p><h3 id="call"><a href="#call" class="headerlink" title="call"></a><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vY2FsbA==" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call">call<i class="fa fa-external-link"></i></span></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myFriend = &#123;</span><br><span class="line">  name: <span class="string">'dongdong'</span>,</span><br><span class="line">  age: <span class="number">21</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.introduce.call(myFriend)); <span class="comment">// =&gt; Hello everyone! My name is dongdong. I'm 21 years old.</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡º <code>introduce</code> è¿™ä¸ªå‡½æ•°ä¸­çš„ this æŒ‡å‘è¢«æ”¹æˆäº† myFriendã€‚Function.prototype.call çš„å‡½æ•°ç­¾åæ˜¯ <code>fun.call(thisArg, arg1, arg2, ...)</code>ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè°ƒç”¨å‡½æ•°æ—¶ this çš„æŒ‡å‘ï¼Œéšåçš„å‚æ•°åˆ™ä½œä¸ºå‡½æ•°çš„å‚æ•°å¹¶è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ fn(arg1, arg2, â€¦)ã€‚</p><h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vYXBwbHk=" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">apply<i class="fa fa-external-link"></i></span></h3><p>apply å’Œ call çš„åŒºåˆ«åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯å®ƒåªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè€Œä¸”ç¬¬äºŒä¸ªå‚æ•°ä¸ºè°ƒç”¨å‡½æ•°æ—¶çš„å‚æ•°æ„æˆçš„æ•°ç»„ã€‚å‡½æ•°ç­¾åï¼š<code>func.apply(thisArg, [argsArray])</code>ã€‚å¦‚æœä¸ç”¨ç»™å‡½æ•°ä¼ å‚æ•°ï¼Œé‚£ä¹ˆä»–ä¿©å°±å…¶å®æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œéœ€è¦ä¼ å‚æ•°çš„æ—¶å€™æ³¨æ„å®ƒçš„åº”è¯¥å°†å‚æ•°è½¬æ¢æˆæ•°ç»„å½¢å¼ã€‚</p><p>ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">displayHobbies</span>(<span class="params">...hobbies</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> likes <span class="subst">$&#123;hobbies.join(<span class="string">', '</span>)&#125;</span>.`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢ä¸¤ä¸ªç­‰ä»·</span></span><br><span class="line">displayHobbies.call(&#123; <span class="attr">name</span>: <span class="string">'Bob'</span> &#125;, <span class="string">'swimming'</span>, <span class="string">'basketball'</span>, <span class="string">'anime'</span>); <span class="comment">// =&gt; // =&gt; Bob likes swimming, basketball, anime.</span></span><br><span class="line">displayHobbies.apply(&#123; <span class="attr">name</span>: <span class="string">'Bob'</span> &#125;, [<span class="string">'swimming'</span>, <span class="string">'basketball'</span>, <span class="string">'anime'</span>]); <span class="comment">// =&gt; Bob likes swimming, basketball, anime.</span></span><br></pre></td></tr></table></figure><p>æœ‰äº› API æ¯”å¦‚ Math.max å®ƒçš„å‚æ•°ä¸ºå¤šå‚æ•°ï¼Œå½“æˆ‘ä»¬æœ‰å¤šå‚æ•°æ„æˆçš„æ•°ç»„ä½¿æˆ–è€…è¯´å‚æ•°å¾ˆå¤šæ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Math.max å‚æ•°ä¸ºå¤šå‚æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// =&gt; 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨å·²çŸ¥ä¸€ä¸ªå¾ˆå¤§çš„å…ƒç´ ä¸ºéšæœºå¤§å°çš„æ•´æ•°æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> bigRandomArray = [...Array(<span class="number">10000</span>).keys()].map(<span class="function"><span class="params">num</span> =&gt;</span> <span class="built_in">Math</span>.trunc(num * <span class="built_in">Math</span>.random()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€æ ·ä½¿ç”¨ Math.max è·å– bigRandomArray ä¸­çš„æœ€å¤§å€¼å‘¢ï¼ŸMath.max æ¥å—çš„æ˜¯å¤šå‚æ•°è€Œä¸æ˜¯æ•°ç»„å‚æ•°å•Š!</span></span><br><span class="line"><span class="comment">// æ€è€ƒä¸‹é¢çš„å†™æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, bigRandomArray)); <span class="comment">// =&gt; 9936</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¸Š ES6 çš„è¯å°±ç®€å•äº†ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å³å¯ï¼Œä¼˜é›…ç®€æ´ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...bigRandomArray));</span><br></pre></td></tr></table></figure><h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vYmluZA==" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">bind<i class="fa fa-external-link"></i></span></h3><p>bind å’Œä¸Šé¢ä¸¤ä¸ªç”¨é€”å·®åˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§ï¼Œå¦‚åŒå­—é¢æ„æ€ï¼ˆç»‘å®šï¼‰ï¼Œæ˜¯ç”¨æ¥ç»‘å®š this æŒ‡å‘çš„ï¼Œè¿”å›ä¸€ä¸ªåŸå‡½æ•°è¢«ç»‘å®š this åçš„æ–°å‡½æ•°ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  name: <span class="string">'YuTengjing'</span>,</span><br><span class="line">  age: <span class="number">22</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">introduce</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Hello everyone! My name is <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>. I'm <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span> years old.`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myFriend = &#123; <span class="attr">name</span>: <span class="string">'dongdong'</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;;</span><br><span class="line">person.introduce = introduce.bind(myFriend);</span><br><span class="line"></span><br><span class="line"><span class="comment">// person.introduce çš„ this å·²ç»è¢«ç»‘å®šåˆ° myFriend ä¸Šäº†</span></span><br><span class="line"><span class="built_in">console</span>.log(person.introduce()); <span class="comment">// =&gt; Hello everyone! My name is dongdong. I'm 21 years old.</span></span><br><span class="line"><span class="built_in">console</span>.log(person.introduce.call(person)); <span class="comment">// =&gt; Hello everyone! My name is dongdong. I'm 21 years old.</span></span><br></pre></td></tr></table></figure><p>bind çš„å‡½æ•°ç­¾åæ˜¯ <code>func.bind(thisArg, arg1, arg2, ...)</code>ã€‚æ˜¥æ‹›çš„æ—¶å€™è¢«é—®è¿‡ bind çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¹²å˜›ç”¨çš„ï¼Œå› ä¸ºæˆ‘ä¹‹å‰å†™ä»£ç æœ¬èº«ä¸æ€ä¹ˆç”¨è¿™å‡ ä¸ª APIï¼Œç”¨çš„æ—¶å€™æˆ‘ä¹Ÿåªç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å½“æ—¶é¢è¯•çš„æ—¶å€™è¢«é—®è¿™ä¸ªé—®é¢˜çš„æ—¶å€™æˆ‘è¿˜æ˜¯æ„£äº†ä¸€ä¸‹ã€‚ä¸è¿‡å…¶å®å¦‚æœå¯ä»¥ä¼ å¤šä¸ªå‚æ•°çš„è¯ï¼ŒçŒœä¹Ÿèƒ½çŒœå¾—å‡ºæ¥æ˜¯å¹²å˜›ç”¨çš„ï¼Œæˆ‘å½“æ—¶å°±çŒœå¯¹äº† Ï†(*ï¿£ 0 ï¿£)ã€‚</p><h2 id="å­¦ä»¥è‡´ç”¨"><a href="#å­¦ä»¥è‡´ç”¨" class="headerlink" title="å­¦ä»¥è‡´ç”¨"></a>å­¦ä»¥è‡´ç”¨</h2><p>æˆ‘ä»¬å­¦ä¹ çŸ¥è¯†çš„æ—¶å€™ä¸èƒ½åªæ˜¯åœç•™åœ¨ç†è§£å±‚é¢ï¼Œéœ€è¦å»æ€è€ƒå®ƒä»¬æœ‰ä»€ä¹ˆç”¨ï¼Œåº”ç”¨åœºæ™¯æœ‰å“ªäº›ã€‚è¿™æ ·çš„è¯ï¼Œå½“ä½ å¤„åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œä½ å°±èƒ½å¾ˆè‡ªç„¶çš„æƒ³å‡ºè§£å†³æ–¹æ¡ˆã€‚</p><h3 id="å¤šå‚å‡½æ•°è½¬æ¢ä¸ºå•ä¸ªæ•°ç»„å‚æ•°è°ƒç”¨"><a href="#å¤šå‚å‡½æ•°è½¬æ¢ä¸ºå•ä¸ªæ•°ç»„å‚æ•°è°ƒç”¨" class="headerlink" title="å¤šå‚å‡½æ•°è½¬æ¢ä¸ºå•ä¸ªæ•°ç»„å‚æ•°è°ƒç”¨"></a>å¤šå‚å‡½æ•°è½¬æ¢ä¸ºå•ä¸ªæ•°ç»„å‚æ•°è°ƒç”¨</h3><p>javascript ä¸­æœ‰å¾ˆå¤š API æ˜¯æ¥å—å¤šä¸ªå‚æ•°çš„æ¯”å¦‚ä¹‹å‰æè¿‡çš„ Math.maxï¼Œè¿˜æœ‰å¾ˆå¤šä¾‹å¦‚ Math.minï¼ŒArray.prototype.push ç­‰å®ƒä»¬éƒ½æ˜¯æ¥å—å¤šä¸ªå‚æ•°çš„ APIï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬åªæœ‰å¤šä¸ªå‚æ•°æ„æˆçš„æ•°ç»„ï¼Œè€Œä¸”å¯èƒ½è¿˜ç‰¹åˆ«å¤§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ©ç”¨ apply å·§å¦™çš„æ¥è½¬æ¢ã€‚</p><p>ä¸‹é¢æ˜¯åˆ©ç”¨ apply æ¥å·§å¦™çš„åˆå¹¶æ•°ç»„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(arr1, arr2);</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå…¶å®ç”¨ ES6 å¯ä»¥éå¸¸çš„ç®€æ´ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr1.push(...arr2);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œå¿˜äº†è¿™ç§ç”¨æ³•å§ï¼ˆï¿£ï¸¶ï¿£ï¼‰â†— ã€€ã€‚</p><h3 id="å°†ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„"><a href="#å°†ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„" class="headerlink" title="å°†ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„"></a>å°†<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9UeXBlZF9hcnJheXM=" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Typed_arrays">ç±»æ•°ç»„<i class="fa fa-external-link"></i></span>è½¬æ¢ä¸ºæ•°ç»„</h3><p>JavaScript ç±»å‹åŒ–æ•°ç»„æ˜¯ä¸€ç§ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒä»¬æœ‰æ•°ç»„çš„ä¸€äº›å±æ€§ï¼Œä½†æ˜¯å¦‚æœä½ ç”¨ Array.isArray() å»æµ‹è¯•ä¼šè¿”å› falseï¼Œå¸¸è§çš„åƒ argumentsï¼ŒNodeList ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testArrayLike</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æœ‰ length å±æ€§æ²¡æœ‰ slice å±æ€§</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length); <span class="comment">// =&gt; 3</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.slice); <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»æ•°ç»„ä¸æ˜¯æ•°ç»„</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(<span class="built_in">arguments</span>)); <span class="comment">// =&gt; false</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>); <span class="comment">// =&gt; &#123; [Iterator]  0: 'a', 1: 'b', 2: 'c', [Symbol(Symbol.iterator)]: [Î»: values] &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> array = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(array)); <span class="comment">// =&gt; true</span></span><br><span class="line">  <span class="built_in">console</span>.log(array); <span class="comment">// =&gt; [ 'a', 'b', 'c' ]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testArrayLike(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>);</span><br></pre></td></tr></table></figure><p>å…¶å® æŠŠ slice æ¢æˆ concatï¼Œsplice ç­‰å…¶å®ƒ API ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æ€è€ƒï¼š<strong>ä¸ºä»€ä¹ˆé€šè¿‡ Array.prototype.slice.call(arrayLike) å¯ä»¥è½¬æ¢ç±»æ•°ç»„ä¸ºæ•°ç»„ï¼Ÿ</strong></p><p>æˆ‘æ²¡æœ‰ç ”ç©¶è¿‡ slice çš„å…·ä½“å®ç°ï¼ŒçŒœæµ‹æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.mySlice = <span class="function"><span class="keyword">function</span>(<span class="params">start = <span class="number">0</span>, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> array = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">const</span> end = end === <span class="literal">undefined</span> ? array.length : end;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> resultArray = [];</span><br><span class="line">  <span class="keyword">if</span> (array.length === <span class="number">0</span>) <span class="keyword">return</span> resultArray;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = start; index &lt; end; index++) &#123;</span><br><span class="line">    resultArray.push(array[index]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> resultArray;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘æƒ³ slice å†…éƒ¨å®ç°å¯èƒ½å°±æ˜¯ä¼šåƒæˆ‘ä¸Šé¢çš„ä»£ç ä¸€æ ·åªéœ€è¦ä¸€ä¸ª length å±æ€§ï¼Œéå†å…ƒç´ è¿”å›æ–°æ•°ç»„ï¼Œæ‰€ä»¥è°ƒç”¨ slice æ—¶å°†å…¶ this æŒ‡å‘ç±»æ•°ç»„èƒ½æ­£å¸¸å·¥ä½œã€‚</p><p>å…¶å®ï¼Œè¿™ä¸ªç”¨æ³•ä¹Ÿå¯ä»¥å¿˜äº†ï¼Œç”¨ ES6 æ¥è½¬æ¢ä¸é€ å¤šç®€å•ï¼ŒES6 å¤§æ³•å¥½ ğŸ˜‚ã€‚</p><p>å¯ä»¥ä½¿ç”¨ Array.from(arrayLike)ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [...arguments];</span><br></pre></td></tr></table></figure><h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><p>ES6 class å‡ºç°ä¹‹å‰ï¼Œä¸ªäººè®¤ä¸ºæ¯”è¾ƒå®Œç¾çš„ç»§æ‰¿æ˜¯ä½¿ç”¨åŸå‹é“¾åŠ ç»„åˆçš„ç»§æ‰¿æ–¹å¼ï¼Œä»¥å‰ç ”ç©¶åŸå‹ç»§æ‰¿å†™çš„ä»£ç åœ¨è¿™ï¼š<a href="https://github.com/tjx666/javascript-code-lab/tree/master/src/prototypeExtends" target="_blank" rel="noopener"><strong>prototypeExtends</strong></a>ã€‚è¿™é‡Œä¸å±•å¼€è®² javascript çš„ç»§æ‰¿ï¼Œé‚£ä¼šåˆæ˜¯ä¸€ä¸ªå·¨å‘ã€‚</p><p>ç»„åˆç»§æ‰¿å…¶å®å¾ˆå¥½ç†è§£ï¼Œè¿™ä¸ªç»„åˆæŒ‡çš„æ˜¯å­ç±»çš„å®ä¾‹å±æ€§ç»„åˆäº†çˆ¶ç±»çš„å®ä¾‹å±æ€§ï¼Œçœ‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.type = type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bird</span>(<span class="params">type, color</span>) </span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>, type);</span><br><span class="line">  <span class="keyword">this</span>.color = color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bird = <span class="keyword">new</span> Bird(<span class="string">'bird'</span>, <span class="string">'green'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bird); <span class="comment">// =&gt; Bird &#123; type: 'bird', color: 'green' &#125;</span></span><br></pre></td></tr></table></figure><p>ç»„åˆç»§æ‰¿æ ¸å¿ƒä»£ç å°±æ˜¯é‚£å¥ Animal.call(this, type)ï¼Œé€šè¿‡è°ƒç”¨çˆ¶ç±»æ„é€ å™¨å¹¶ä¿®æ”¹å…¶ this æŒ‡å‘ä¸ºå­ç±»å®ä¾‹æ¥è¾¾åˆ°å­ç±»å®ä¾‹ä¸Šç»„åˆçˆ¶ç±»çš„å®ä¾‹å±æ€§ç›®çš„ã€‚</p><h2 id="è‡ªå·±å®ç°-callï¼Œapplyï¼Œbind"><a href="#è‡ªå·±å®ç°-callï¼Œapplyï¼Œbind" class="headerlink" title="è‡ªå·±å®ç° callï¼Œapplyï¼Œbind"></a>è‡ªå·±å®ç° callï¼Œapplyï¼Œbind</h2><h3 id="call-1"><a href="#call-1" class="headerlink" title="call"></a>call</h3><p>å®ç° call ä¸»è¦æœ‰ä¸¤ç§æ€è·¯ï¼Œä¸€ç§æ˜¯é€šè¿‡åœ¨ thisArg ä¸Šä¸´æ—¶æ·»åŠ  funcï¼Œç„¶åç›´æ¥è°ƒç”¨ thisArg.func()ã€‚å¦å¤–ä¸€ç§æ˜¯åˆ©ç”¨ func.toString() æ›¿æ¢ this ä¸º thisArgï¼Œå† eval æ¥å®ç°ã€‚</p><h4 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h4><p>ä¸‹é¢è¿™ä¸ªç‰ˆæœ¬ä¸»è¦ä¸ºäº†è¯´æ˜æ€è·¯ï¼Œå…¶å®æ˜¯æœ‰å¾ˆå¤šç¼ºé™·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ this å…¶å®å°±æ˜¯ func.myCall(thisArg, ...args) ä¸­çš„ funcï¼Œå› ä¸º myCall æ˜¯é€šè¿‡ func è°ƒç”¨çš„å˜›</span></span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨ thisArg ä¸Šä¸´æ—¶ç»‘å®š func</span></span><br><span class="line">  thisArg.tempFunc = func;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ thisArg è°ƒç”¨ func æ¥è¾¾åˆ°æ”¹å˜ this æŒ‡å‘çš„ä½œç”¨</span></span><br><span class="line">  <span class="keyword">const</span> result = thisArg.tempFunc(...args);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg.tempFunc;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(printName.myCall(&#123; <span class="attr">name</span>: <span class="string">'ly'</span> &#125;)); <span class="comment">// =&gt; ly</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­æœ‰ä¸€äº›ç¼ºé™·ï¼š</p><ol><li><p>myCall çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯èƒ½è¢«ä¼ å…¥éå¯¹è±¡å‚æ•°ï¼Œè¦å¯¹ä¸åŒç±»å‹çš„ thisArg åˆ†åˆ«å¤„ç†ã€‚<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vY2FsbA==" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call">MDN ä¸­å¯¹ thisArg çš„æè¿°<i class="fa fa-external-link"></i></span>ï¼š</p><blockquote><p>åœ¨ <em>fun</em> å‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ <code>this</code> å€¼<em>ã€‚</em>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŒ‡å®šçš„ <code>this</code> å€¼å¹¶ä¸ä¸€å®šæ˜¯è¯¥å‡½æ•°æ‰§è¡Œæ—¶çœŸæ­£çš„ <code>this</code> å€¼ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°åœ¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noopener"><code>éä¸¥æ ¼æ¨¡å¼</code></a>ä¸‹è¿è¡Œï¼Œåˆ™æŒ‡å®šä¸º <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener"><code>null</code></a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener"><code>undefined</code></a> çš„ <code>this</code> å€¼ä¼šè‡ªåŠ¨æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­å°±æ˜¯ window å¯¹è±¡ï¼‰ï¼ŒåŒæ—¶å€¼ä¸ºåŸå§‹å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼‰çš„ <code>this</code> ä¼šæŒ‡å‘è¯¥åŸå§‹å€¼çš„è‡ªåŠ¨åŒ…è£…å¯¹è±¡ã€‚</p></blockquote></li><li><p>å¯èƒ½ thisArg åŸæœ¬å°±æœ‰ä¸€ä¸ªå±æ€§å« tempFuncï¼Œè¿™æ˜¯å®Œå…¨æœ‰å¯èƒ½çš„ï¼ŒæŒ‰ç…§ä¸Šé¢çš„ä»£ç æ¥å®ç° myCall å°±æŠŠåŸæœ‰çš„ tempFunc å±æ€§æ¶ˆé™¤äº†ã€‚å¯ä»¥ä½¿ç”¨ ES6 Symbol æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p></li></ol><p>æ‰€ä»¥å®Œå–„åçš„ myCall æ˜¯é…±ç´«ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (thisArg === <span class="literal">undefined</span> || thisArg === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ thisArg æ˜¯ undefined æˆ–åˆ™ nullï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨å°±å¯ä»¥è¾¾åˆ°æŒ‡å‘å…¨å±€å¯¹è±¡çš„ç›®çš„äº†</span></span><br><span class="line">    <span class="keyword">return</span> tempFunc(...args);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ this å…¶å®å°±æ˜¯ func.myCall(thisArg, ...args) ä¸­çš„ funcï¼Œå› ä¸º myCall æ˜¯é€šè¿‡ func è°ƒç”¨çš„å˜›</span></span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tempFunc = <span class="built_in">Symbol</span>(<span class="string">'Temp property'</span>);</span><br><span class="line">  <span class="comment">// åœ¨ thisArg ä¸Šä¸´æ—¶ç»‘å®š func</span></span><br><span class="line">  thisArg[tempFunc] = func;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ thisArg è°ƒç”¨ func æ¥è¾¾åˆ°æ”¹å˜ this æŒ‡å‘çš„ä½œç”¨</span></span><br><span class="line">  <span class="keyword">const</span> result = thisArg[tempFunc](...args);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span></span><br><span class="line">  <span class="built_in">Reflect</span>.deleteProperty(thisArg, tempFunc);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(printName.myCall(&#123; <span class="attr">name</span>: <span class="string">'ly'</span> &#125;)); <span class="comment">// =&gt; ly</span></span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h4><p>è®²ç¬¬äºŒä¸­æ–¹å¼ä¹‹å‰ï¼Œå…ˆæ¥èŠèŠå…¶å®ƒçš„ä¸€äº›ç›¸å…³çš„ä¸œè¥¿ã€‚</p><h5 id="Function-prototype-toString"><a href="#Function-prototype-toString" class="headerlink" title="Function.prototype.toString"></a>Function.prototype.toString</h5><p>è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„ toString æ–¹æ³•è¿”å›çš„æ˜¯è¿™ä¸ªå‡½æ•°å®šä¹‰æ—¶ä»£ç å­—ç¬¦ï¼š</p><p><img data-src="https://i.loli.net/2019/06/29/5d16c5b48ef8590170.png" alt="function toString"></p><p>æˆ‘æ•…æ„åœ¨ <code>console.log(&#39;hello world&#39;);</code> ä¸Šä¸‹æ’äº†ä¸€ä¸ªç©ºè¡Œï¼Œfunc å·¦å³å¤šæ‰“äº†å‡ ä¸ªç©ºæ ¼ï¼Œå¯ä»¥çœ‹åˆ° func.toString() è¿”å›çš„å­—ç¬¦ä¸²å®Œå…¨æ˜¯æˆ‘å®šä¹‰ func æ—¶çš„æ ·å­ï¼Œå¤šä½™çš„ç©ºè¡Œå’Œç©ºæ ¼ä¾ç„¶å­˜åœ¨ï¼Œæ²¡æœ‰æ ¼å¼åŒ–ã€‚</p><h5 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h5><p>eval å‡½æ•°å¯ä»¥è®©æˆ‘ä»¬å°†ä¸€ä¸ªå­—ç¬¦ä¸²å½“ä½œä»£ç æ¥è¿è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ctx = &#123; <span class="attr">name</span>: <span class="string">'Bob'</span> &#125;;</span><br><span class="line"><span class="built_in">eval</span>(<span class="string">'console.log(ctx.name)'</span>); <span class="comment">// Bob</span></span><br></pre></td></tr></table></figure><h5 id="åŠ¨æ‰‹å®ç°"><a href="#åŠ¨æ‰‹å®ç°" class="headerlink" title="åŠ¨æ‰‹å®ç°"></a>åŠ¨æ‰‹å®ç°</h5><p>æ‰€ä»¥çœ‹åˆ°è¿™é‡Œæ€è·¯å·²ç»å¾ˆæ¸…æ™°äº†ï¼šå…ˆé€šè¿‡ func.toString æ‹¿åˆ° func çš„ä»£ç å­—ç¬¦ä¸²ï¼Œå†æ›¿æ¢å…¶ä¸­çš„ this ä¸º thisArgï¼Œå†ä½¿ç”¨ eval è·å–æ›¿æ¢ this åçš„ä¸´æ—¶å‡½æ•°ï¼ˆå‡½æ•°åæ˜¾ç„¶å’Œ func ä¸€æ ·ï¼‰å¹¶æ‰§è¡Œã€‚ä»£ç å®ç°å°±æ˜¯é…±ç´«ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (thisArg === <span class="literal">undefined</span> || thisArg === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ thisArg æ˜¯ undefined æˆ–åˆ™ nullï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨å°±å¯ä»¥è¾¾åˆ°æŒ‡å‘å…¨å±€å¯¹è±¡çš„ç›®çš„äº†</span></span><br><span class="line">    <span class="keyword">return</span> tempFunc();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ this å…¶å®å°±æ˜¯ func.myCall(thisArg, ...args) ä¸­çš„ funcï¼Œå› ä¸º myCall æ˜¯é€šè¿‡ func è°ƒç”¨çš„å˜›</span></span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">const</span> funcString = func.toString();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›¿æ¢ this ä¸º thisArg</span></span><br><span class="line">  <span class="keyword">const</span> tempFuncString = funcString.replace(<span class="regexp">/this/g</span>, <span class="string">'thisArg'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ eval æ„é€ ä¸€ä¸ªä¸´æ—¶å‡½æ•°å¹¶æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">const</span> tempFunc = <span class="built_in">eval</span>(<span class="string">`(<span class="subst">$&#123;tempFuncString&#125;</span>)`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒç”¨ tempFunc å¹¶ä¼ å…¥å‚æ•°</span></span><br><span class="line">  <span class="keyword">return</span> tempFunc(...args);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(printName.myCall(&#123; <span class="attr">name</span>: <span class="string">'ly'</span> &#125;)); <span class="comment">// =&gt; ly</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¸€äº›æ‰“å°è¯­å¥ååœ¨ chrome ä¸­çš„æ‰§è¡Œæƒ…å†µï¼š<br><img data-src="https://i.loli.net/2019/06/29/5d16d5a0b97eb35960.png" alt="eval-call"></p><p>ä½†æ˜¯ï¼Œ<strong>è¿™ç§å®ç°æ–¹å¼å…¶å®æ˜¯å¾ˆæ‰¯æ·¡çš„</strong>ã€‚å®ƒæœ‰å¾ˆå¤šä¸èƒ½å®¹å¿è€Œä¸”æ— è§£çš„ç¼ºé™·ï¼š</p><ol><li>ä¸´æ—¶å‡½æ•°çš„ä½œç”¨åŸŸå’Œ func çš„ä½œç”¨åŸŸä¸ä¸€æ ·ã€‚ä½¿ç”¨ eval(<code>(${tempFuncString})</code>) æ—¶å£°æ˜äº†ä¸€ä¸ªå’Œ func åŒåçš„ä¸´æ—¶å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨åŸŸæ˜¯ myCall è¿™ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼Œè€Œ func çš„ä½œç”¨åŸŸæ˜¾ç„¶åœ¨ myCall å¤–ã€‚</li><li>æ›¿æ¢ â€˜thisâ€™ æ—¶æœ‰å¯èƒ½ func å‡½æ•°å…¶ä¸­æœ‰å­—ç¬¦ä¸²æˆ–è€…æ ‡è¯†ç¬¦æœ¬èº«åŒ…å«äº† â€˜thisâ€™ï¼Œæ¯”å¦‚ func å‡½æ•°ä¸­æœ‰ console.log(â€˜thisâ€™) è¿™ä¹ˆä¸€æ¡è¾“å‡ºè¯­å¥ï¼Œé‚£è¿™ä¸ª this ä¹Ÿè¢«æ›¿æ¢äº†ï¼Œæˆ–è€…å®šä¹‰äº†ä¸ªå˜é‡å« xxthisxxã€‚</li></ol><p>æ‰€ä»¥ï¼Œç›¸å¯¹è€Œè¨€ï¼Œç¬¬ä¸€ç§å®ç°æ›´é è°±ã€‚</p><h3 id="apply-1"><a href="#apply-1" class="headerlink" title="apply"></a>apply</h3><p>call å’Œ apply é™¤äº†å‚æ•°ä¸ä¸€æ ·ä¹‹å¤–æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚æ‰€ä»¥ç¨å¾®è°ƒæ•´ myCall ä¸­çš„å‚æ•°å’Œè°ƒç”¨ func æ—¶çš„è°ƒç”¨å½¢å¼å³å¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ this å…¶å®å°±æ˜¯ func.myCall(thisArg, ...args) ä¸­çš„ funcï¼Œå› ä¸º myCall æ˜¯é€šè¿‡ func è°ƒç”¨çš„å˜›</span></span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">if</span> (thisArg === <span class="literal">undefined</span> || thisArg === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ thisArg æ˜¯ undefined æˆ–åˆ™ nullï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨å°±å¯ä»¥è¾¾åˆ°æŒ‡å‘å…¨å±€å¯¹è±¡çš„ç›®çš„äº†</span></span><br><span class="line">    <span class="keyword">return</span> func(args);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tempFunc = <span class="built_in">Symbol</span>(<span class="string">'Temp property'</span>);</span><br><span class="line">  <span class="comment">// åœ¨ thisArg ä¸Šä¸´æ—¶ç»‘å®š func</span></span><br><span class="line">  thisArg[tempFunc] = func;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ thisArg è°ƒç”¨ func æ¥è¾¾åˆ°æ”¹å˜ this æŒ‡å‘çš„ä½œç”¨</span></span><br><span class="line">  <span class="keyword">const</span> result = thisArg[tempFunc](args);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span></span><br><span class="line">  <span class="keyword">delete</span> thisArg[tempFunc];</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(printName.myCall(&#123; <span class="attr">name</span>: <span class="string">'ly'</span> &#125;)); <span class="comment">// =&gt; ly</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼å°±ä¸å†™äº†ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä¸å†™ä¸»è¦æ—¶å› ä¸ºç¬¬äºŒç§å®ç°æ²¡ä»€ä¹ˆå®ç”¨æ€§ï¼Œä»‹ç»å®ƒçš„å°±æ˜¯ä¸ºäº†æ‰©å±•ä¸€ä¸‹æ€è·¯ã€‚</p><h3 id="bind-1"><a href="#bind-1" class="headerlink" title="bind"></a>bind</h3><p>ä½¿ç”¨ call æ¥å®ç° bind æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é¢è¯•é¢˜ï¼Œç±»ä¼¼äºä½¿ç”¨ map å®ç° reduceï¼Œå…¶å®è¿˜æ˜¯è€ƒå¯Ÿä½  javascript æŒæ¡çš„æ€ä¹ˆæ ·ã€‚å¦‚æœé¢è¯•è¢«é—®åˆ°é—­åŒ…æœ‰å“ªäº›å®é™…åº”ç”¨ä½ å…¶å®ä¹Ÿå¯ä»¥è¯´å¯ä»¥ä½¿ç”¨é—­åŒ…æ¥å®ç° bindï¼Œå¯¹å§ï¼Œé¢è¯•è¿˜æ˜¯æœ‰äº›æŠ€å·§çš„ã€‚</p><p>æ€è·¯æˆ‘ä¸Šé¢å…¶å®å·²ç»è¯´äº†ï¼Œå°±æ˜¯åˆ©ç”¨é—­åŒ…å’Œ call å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bind è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...otherArgs</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œå‡½æ•°æ—¶ this å§‹ç»ˆä¸ºå¤–å±‚å‡½æ•°ä¸­çš„ thisArgï¼Œå‰é¢çš„è°ƒç”¨å‚æ•°ä¹Ÿè¢«ç»‘å®šä¸º args</span></span><br><span class="line">    <span class="keyword">return</span> func.call(thisArg, ...args, ...otherArgs);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printThisAndAndArgs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`This is <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>)&#125;</span>, arguments is <span class="subst">$&#123;[...<span class="built_in">arguments</span>].join(<span class="string">', '</span>)&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> boundFunc = printThisAndAndArgs.myBind(&#123; <span class="attr">name</span>: <span class="string">'Lily'</span> &#125;, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">boundFunc(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>); <span class="comment">// =&gt; This is &#123;"name":"Lily"&#125;, arguments is 1, 2, 3, 4, 5, 6</span></span><br></pre></td></tr></table></figure><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸Šé¢å®ç°çš„ç‰ˆæœ¬è‚¯å®šæ˜¯æœ‰äº›é—®é¢˜çš„ã„Ÿ( â–”, â–” )ã„ã€‚</p><h4 id="new-çš„å®ç°åŸç†"><a href="#new-çš„å®ç°åŸç†" class="headerlink" title="new çš„å®ç°åŸç†"></a>new çš„å®ç°åŸç†</h4><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯æ²¡å¤„ç†å½“ä½¿ç”¨ new è°ƒç”¨çš„æƒ…å†µï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BoundStudent1 = Student.bind(&#123; <span class="attr">name</span>: <span class="string">'Taylor'</span> &#125;, <span class="string">'ly'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> BoundStudent1(<span class="number">22</span>)); <span class="comment">// =&gt; Student &#123; name: 'ly', age: 22 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BoundStudent2 = Student.myBind(&#123; <span class="attr">name</span>: <span class="string">'Taylor'</span> &#125;, <span class="string">'ly'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> BoundStudent2(<span class="number">22</span>)); <span class="comment">// =&gt; &#123;&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° bind å½“è¿”å›çš„å‡½æ•°è¢«ä½¿ç”¨ new è°ƒç”¨æ—¶ï¼Œ thisArg è¢«å¿½ç•¥ï¼Œæ­¤æ—¶ bind å‡½æ•°çš„ä½œç”¨åªæ˜¯èµ·åˆ°äº†ç»‘å®šæ„é€ å‡½æ•°å‚æ•°çš„ä½œç”¨ã€‚å½“å‰ç‰ˆæœ¬çš„ myBind åªæ˜¯è¿”å›äº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ²¡æœ‰åœ¨è¿”å›çš„å®ä¾‹å¯¹è±¡ä¸Šç»‘å®šå±æ€§ã€‚</p><p>è¿™é‡Œè¡¥å……ä¸€ä¸‹ new æ“ä½œç¬¦çš„å®ç°åŸç†ã€‚æˆ‘æœ‰ä¸€ä¸ªé¡¹ç›®<a href="https://github.com/tjx666/javascript-code-lab" target="_blank" rel="noopener"><strong>javascript-code-lab</strong></a>ä¸Šä¿å­˜æˆ‘æ¢ç´¢åŸç”Ÿ js å¥¥ç§˜çš„ä¸€äº›ä»£ç ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ã€‚å…¶ä¸­æˆ‘ new æ“ä½œç¬¦çš„å®ç°æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _new = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> target = <span class="built_in">Object</span>.create(fn.prototype);</span><br><span class="line">    <span class="keyword">const</span> result = fn.call(target, ...args);</span><br><span class="line">    <span class="keyword">const</span> isObjectOrFunction = (result !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> result === <span class="string">'object'</span>) || <span class="keyword">typeof</span> result === <span class="string">'function'</span>);</span><br><span class="line">    <span class="keyword">return</span> isObjectOrFunction ? result : target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®å¾ˆå¥½ç†è§£ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ new fn(arg1, arg2, â€¦) çš„æ—¶å€™ï¼Œå…¶å®ç›¸å½“äºæ‰§è¡Œäº† _new(fn, arg1, arg2, â€¦)ã€‚å…·ä½“å†…éƒ¨çš„æ‰§è¡Œæ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š</p><p>é¦–å…ˆæ„é€ ä¸€ä¸ªç©ºå¯¹è±¡ targetï¼Œå®ƒçš„åŸå‹åº”è¯¥ä¸º fn.prototypeï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº† ES6 çš„ Object.create æ¥å®ç°ã€‚</p><p>ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ target ä¸Šç»‘å®šä½ åœ¨ fn ä¸­é€šè¿‡ this.key = value æ¥ç»‘å®šåˆ°å®ä¾‹å¯¹è±¡çš„å±æ€§ã€‚å…·ä½“åšæ³•å°±æ˜¯æ‰§è¡Œ fn å¹¶ä¸”å°†å…¶ this æŒ‡å‘ targetï¼Œä¹Ÿå°±æ˜¯ const result = fn.call(target, â€¦args);ã€‚</p><p>æœ€åè¿˜è¦æ³¨æ„çš„å°±æ˜¯å½“ fn çš„è¿”å›å€¼ result æ˜¯å¯¹è±¡æˆ–è€…å‡½æ•°çš„æ—¶å€™ï¼Œnew fn(arg1, arg2, â€¦) è¿”å›çš„å°±æ˜¯æŒ‡è¡Œ fn çš„è¿”å›å€¼è€Œä¸æ˜¯ targetï¼Œå¦åˆ™ç›´æ¥è¿”å› targetï¼Œä¹Ÿå°±æ˜¯å®ä¾‹å¯¹è±¡ã€‚</p><p><img data-src="https://i.loli.net/2019/06/29/5d16ec374162677354.png" alt="new"></p><p>å¦‚æœæœ‰äººé—®ä½ æœ‰å“ªäº›æ–¹å¼å¯ä»¥ä¿®æ”¹å‡½æ•°çš„ this æŒ‡å‘ï¼Œå…¶å® <strong>new æ“ä½œç¬¦ä¹Ÿå¯ä»¥ä¿®æ”¹æ„é€ å‡½æ•°çš„æŒ‡å‘</strong>ï¼Œæ²¡æ¯›ç—…å§ã€‚</p><p>äº†è§£äº† new æ“ä½œç¬¦çš„åŸç†ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸Šé¢æˆ‘ä»¬å®ç°çš„ myBind ä¸ºä»€ä¹ˆä¼šåœ¨ new æ—¶å·¥ä½œä¸æ­£å¸¸ã€‚å½“æˆ‘ä»¬è°ƒç”¨ new BoundStudent2(22) æ—¶ï¼Œæ ¹æ®æˆ‘ä¸Šé¢è®²çš„ new çš„åŸç†çŸ¥é“ï¼Œåœ¨æ„é€ å‡ºä¸€ä¸ªä»¥ BoundStudent.prototype ä¸ºåŸå‹çš„ç©ºå¯¹è±¡ target åï¼Œä¼šè°ƒç”¨ BoundStudent.call(target) ã€‚ä½†æ˜¯ï¼Œè§‚å¯Ÿæˆ‘ä»¬å®ç°çš„ myBindï¼Œä½œä¸º myBind(thisArg) çš„è¿”å›å€¼çš„ BoundStudent2ï¼Œå®ƒå†…éƒ¨æ‰§è¡Œæ—¶å§‹æ˜¯è°ƒç”¨ func.call(thisArg, â€¦args, â€¦otherArgs)ï¼Œä¹Ÿå°±æ˜¯è¯´ this å§‹ç»ˆæ˜¯ thisArgï¼Œæ‰€ä»¥æ‰æ²¡æœ‰ç»‘å®š nameï¼Œage å±æ€§åˆ° target ä¸Šï¼Œå…¶å®æ˜¯è¢«ç»‘å®šåˆ°äº† thisArg ä¸Šå»äº†ã€‚è€Œä¸”ç”±äº BoundStudent.call(target) è¿”å›å€¼ä¸º undefinedï¼Œæ‰€ä»¥ new BoundStudent2(22) çš„ç»“æœå°±æ˜¯ targetã€‚</p><h4 id="åŒºåˆ†å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡-new-è°ƒç”¨"><a href="#åŒºåˆ†å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡-new-è°ƒç”¨" class="headerlink" title="åŒºåˆ†å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡ new è°ƒç”¨"></a>åŒºåˆ†å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡ new è°ƒç”¨</h4><p>ä¸Šé¢æˆ‘ä»¬åˆ†æäº† new è°ƒç”¨ myBind ç»‘å®šçš„å‡½æ•°äº§ç”Ÿçš„é—®é¢˜çš„åŸå› ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿæƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¿…é¡»å¾—èƒ½å¤ŸåŒºåˆ†å‡ºè°ƒç”¨ BoundFunc2 æ—¶æ˜¯å¦æ˜¯é€šè¿‡ new æ¥è°ƒç”¨çš„ã€‚å¯ä»¥ä½¿ç”¨ ES6 ä¸­ <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL25ldy50YXJnZXQ=" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new.target">new.target<i class="fa fa-external-link"></i></span> æ¥åŒºåˆ†ã€‚</p><p><img data-src="https://i.loli.net/2019/06/29/5d16fed23267568788.png" alt="new.target"></p><p><strong>new.target</strong>å±æ€§å…è®¸ä½ æ£€æµ‹å‡½æ•°æˆ–æ„é€ æ–¹æ³•æ˜¯å¦æ˜¯é€šè¿‡<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL25ldw==" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new">new<i class="fa fa-external-link"></i></span>è¿ç®—ç¬¦è¢«è°ƒç”¨çš„ã€‚åœ¨é€šè¿‡<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL25ldw==" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new">new<i class="fa fa-external-link"></i></span>è¿ç®—ç¬¦è¢«åˆå§‹åŒ–çš„å‡½æ•°æˆ–æ„é€ æ–¹æ³•ä¸­ï¼Œ<code>new.target</code>è¿”å›ä¸€ä¸ªæŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨ã€‚åœ¨æ™®é€šçš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œ<code>new.target</code> çš„å€¼æ˜¯<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener"><code>undefined</code></a>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bind è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¦‚æœä½¿ç”¨ new è°ƒç”¨äº†è¢«ç»‘å®šåçš„å‡½æ•°ï¼Œå…¶ä¸­çš„ this å³æ˜¯ new æœ€åè¿”å›çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ target</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...otherArgs</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å½“ new.target ä¸º funcï¼Œä¸ä¸ºç©ºæ—¶ï¼Œç»‘å®š thisï¼Œè€Œä¸æ˜¯ thisArg</span></span><br><span class="line">    <span class="keyword">return</span> func.call(<span class="keyword">new</span>.target ? <span class="keyword">this</span> : thisArg, ...args, ...otherArgs);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BoundStudent1 = Student.bind(&#123; <span class="attr">name</span>: <span class="string">'Taylor'</span> &#125;, <span class="string">'ly'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> BoundStudent1(<span class="number">22</span>)); <span class="comment">// =&gt; Student &#123; name: 'ly', age: 22 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BoundStudent2 = Student.myBind(&#123; <span class="attr">name</span>: <span class="string">'Taylor'</span> &#125;, <span class="string">'ly'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> BoundStudent2(<span class="number">22</span>)); <span class="comment">// =&gt; &#123; name: 'ly', age: 22 &#125;</span></span><br></pre></td></tr></table></figure><h4 id="å¤„ç†åŸå‹é“¾"><a href="#å¤„ç†åŸå‹é“¾" class="headerlink" title="å¤„ç†åŸå‹é“¾"></a>å¤„ç†åŸå‹é“¾</h4><p>å½“å‰ç‰ˆæœ¬çš„ myBind æ²¡æœ‰å¤„ç†åŸå‹é“¾ï¼ŒBoundStudent2 new å‡ºæ¥çš„å®ä¾‹æ— æ³•è®¿é—® Student åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bind è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¦‚æœä½¿ç”¨ new è°ƒç”¨äº†è¢«ç»‘å®šåçš„å‡½æ•°ï¼Œå…¶ä¸­çš„ this å³æ˜¯ new æœ€åè¿”å›çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ target</span></span><br><span class="line">  <span class="keyword">const</span> boundFunc = <span class="function"><span class="keyword">function</span>(<span class="params">...otherArgs</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å½“ new.target ä¸º funcï¼Œä¸ä¸ºç©ºæ—¶ï¼Œç»‘å®š thisï¼Œè€Œä¸æ˜¯ thisArg</span></span><br><span class="line">    <span class="keyword">return</span> func.call(<span class="keyword">new</span>.target ? <span class="keyword">this</span> : thisArg, ...args, ...otherArgs);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  boundFunc.prototype = <span class="built_in">Object</span>.create(func.prototype);</span><br><span class="line">  boundFunc.prototype.constructor = boundFunc;</span><br><span class="line">  <span class="keyword">return</span> boundFunc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.type = <span class="string">'student'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BoundStudent2 = Student.myBind(&#123; <span class="attr">name</span>: <span class="string">'Taylor'</span> &#125;, <span class="string">'ly'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> BoundStudent2(<span class="number">22</span>).type); <span class="comment">// =&gt; student</span></span><br></pre></td></tr></table></figure><h4 id="å®Œå–„ä¸€äº›ç»†èŠ‚"><a href="#å®Œå–„ä¸€äº›ç»†èŠ‚" class="headerlink" title="å®Œå–„ä¸€äº›ç»†èŠ‚"></a>å®Œå–„ä¸€äº›ç»†èŠ‚</h4><p>è¿”å›çš„å‡½æ•°æ¯•ç«Ÿæ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå®ƒçš„æœ‰äº›å±æ€§éœ€è¦æˆ‘ä»¬ä¿®æ”¹ã€‚æˆ‘ä»¬åœ¨å¤„ç†ä¸€ä¸‹ name å’Œ length å±æ€§ã€‚å¦‚æœä¸€ä¸ªå‡½æ•° func è¢«ç»‘å®šäº†è‹±æ–‡å« boundï¼Œé‚£ä¹ˆ func.name åº”è¯¥æ˜¯ <code>bound func</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> boundFunc = func.bind(&#123;&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(boundFunc.name); <span class="comment">// bound func</span></span><br></pre></td></tr></table></figure><p>func.length è¡¨ç¤ºå‡½æ•°çš„å‚æ•°ä¸ªæ•°ï¼Œä½†æ˜¯ BoundFunc çš„å‚æ•°ä¸ªæ•°å’Œ func çš„å‚æ•°ä¸ªæ•°å¯ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è°ƒæ•´ func.lengthã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ Function.prototype.name å’Œ Function.prototype.length æ˜¯ä¸å¯å†™çš„ï¼Œæ‰€ä»¥è¦é€šè¿‡ Object.defineProperties æ¥ä¿®æ”¹ã€‚</p><p>æœ€ç»ˆç‰ˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span>(<span class="params">thisArg, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> func = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bind è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¦‚æœä½¿ç”¨ new è°ƒç”¨äº†è¢«ç»‘å®šåçš„å‡½æ•°ï¼Œå…¶ä¸­çš„ this å³æ˜¯ new æœ€åè¿”å›çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ target</span></span><br><span class="line">  <span class="keyword">const</span> boundFunc = <span class="function"><span class="keyword">function</span>(<span class="params">...otherArgs</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å½“ new.target ä¸º funcï¼Œä¸ä¸ºç©ºæ—¶ï¼Œç»‘å®š thisï¼Œè€Œä¸æ˜¯ thisArg</span></span><br><span class="line">    <span class="keyword">return</span> func.call(<span class="keyword">new</span>.target ? <span class="keyword">this</span> : thisArg, ...args, ...otherArgs);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  boundFunc.prototype = <span class="built_in">Object</span>.create(func.prototype);</span><br><span class="line">  boundFunc.prototype.constructor = boundFunc;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperties(boundFunc, &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">      value: <span class="string">`bound <span class="subst">$&#123;func.name&#125;</span>`</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    length: &#123;</span><br><span class="line">      value: func.length,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> boundFunc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.type = <span class="string">'student'</span>;</span><br><span class="line"><span class="keyword">const</span> BoundStudent2 = Student.myBind(&#123; <span class="attr">name</span>: <span class="string">'Taylor'</span> &#125;, <span class="string">'ly'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> BoundStudent2(<span class="number">22</span>).type); <span class="comment">// =&gt; student</span></span><br><span class="line"><span class="built_in">console</span>.log(BoundStudent2.name); <span class="comment">// =&gt; bound Student</span></span><br><span class="line"><span class="built_in">console</span>.log(BoundStudent2.length); <span class="comment">// =&gt; 2</span></span><br></pre></td></tr></table></figure><p>bind æ˜¯ ES5 æ‰æ–°å¢çš„ APIï¼Œ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGlt" title="https://github.com/es-shims/es5-shim">es5-shim<i class="fa fa-external-link"></i></span> æ˜¯ä¸€ä¸ªè®©ä¼ ç»Ÿå’Œç°ä»£çš„æµè§ˆå™¨å¼•æ“å…¼å®¹ es5 çš„å«ç‰‡åº“ï¼Œå…¶ä¸­ bind çš„å®šä¹‰æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">defineProperties(FunctionPrototype, &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">that</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// .length is 1</span></span><br><span class="line">    <span class="comment">// 1. Let Target be the this value.</span></span><br><span class="line">    <span class="keyword">var</span> target = <span class="keyword">this</span>;</span><br><span class="line">    <span class="comment">// 2. If IsCallable(Target) is false, throw a TypeError exception.</span></span><br><span class="line">    <span class="keyword">if</span> (!isCallable(target)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Function.prototype.bind called on incompatible '</span> + target);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3. Let A be a new (possibly empty) internal list of all of the</span></span><br><span class="line">    <span class="comment">//   argument values provided after thisArg (arg1, arg2 etc), in order.</span></span><br><span class="line">    <span class="comment">// XXX slicedArgs will stand in for "A" if used</span></span><br><span class="line">    <span class="keyword">var</span> args = array_slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>); <span class="comment">// for normal call</span></span><br><span class="line">    <span class="comment">// 4. Let F be a new native ECMAScript object.</span></span><br><span class="line">    <span class="comment">// 11. Set the [[Prototype]] internal property of F to the standard</span></span><br><span class="line">    <span class="comment">//   built-in Function prototype object as specified in 15.3.3.1.</span></span><br><span class="line">    <span class="comment">// 12. Set the [[Call]] internal property of F as described in</span></span><br><span class="line">    <span class="comment">//   15.3.4.5.1.</span></span><br><span class="line">    <span class="comment">// 13. Set the [[Construct]] internal property of F as described in</span></span><br><span class="line">    <span class="comment">//   15.3.4.5.2.</span></span><br><span class="line">    <span class="comment">// 14. Set the [[HasInstance]] internal property of F as described in</span></span><br><span class="line">    <span class="comment">//   15.3.4.5.3.</span></span><br><span class="line">    <span class="keyword">var</span> bound;</span><br><span class="line">    <span class="keyword">var</span> binder = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> bound) &#123;</span><br><span class="line">        <span class="comment">// 15.3.4.5.2 [[Construct]]</span></span><br><span class="line">        <span class="comment">// When the [[Construct]] internal method of a function object,</span></span><br><span class="line">        <span class="comment">// F that was created using the bind function is called with a</span></span><br><span class="line">        <span class="comment">// list of arguments ExtraArgs, the following steps are taken:</span></span><br><span class="line">        <span class="comment">// 1. Let target be the value of F's [[TargetFunction]]</span></span><br><span class="line">        <span class="comment">//   internal property.</span></span><br><span class="line">        <span class="comment">// 2. If target has no [[Construct]] internal method, a</span></span><br><span class="line">        <span class="comment">//   TypeError exception is thrown.</span></span><br><span class="line">        <span class="comment">// 3. Let boundArgs be the value of F's [[BoundArgs]] internal</span></span><br><span class="line">        <span class="comment">//   property.</span></span><br><span class="line">        <span class="comment">// 4. Let args be a new list containing the same values as the</span></span><br><span class="line">        <span class="comment">//   list boundArgs in the same order followed by the same</span></span><br><span class="line">        <span class="comment">//   values as the list ExtraArgs in the same order.</span></span><br><span class="line">        <span class="comment">// 5. Return the result of calling the [[Construct]] internal</span></span><br><span class="line">        <span class="comment">//   method of target providing args as the arguments.</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> result = apply.call(target, <span class="keyword">this</span>, array_concat.call(args, array_slice.call(<span class="built_in">arguments</span>)));</span><br><span class="line">        <span class="keyword">if</span> ($<span class="built_in">Object</span>(result) === result) &#123;</span><br><span class="line">          <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 15.3.4.5.1 [[Call]]</span></span><br><span class="line">        <span class="comment">// When the [[Call]] internal method of a function object, F,</span></span><br><span class="line">        <span class="comment">// which was created using the bind function is called with a</span></span><br><span class="line">        <span class="comment">// this value and a list of arguments ExtraArgs, the following</span></span><br><span class="line">        <span class="comment">// steps are taken:</span></span><br><span class="line">        <span class="comment">// 1. Let boundArgs be the value of F's [[BoundArgs]] internal</span></span><br><span class="line">        <span class="comment">//   property.</span></span><br><span class="line">        <span class="comment">// 2. Let boundThis be the value of F's [[BoundThis]] internal</span></span><br><span class="line">        <span class="comment">//   property.</span></span><br><span class="line">        <span class="comment">// 3. Let target be the value of F's [[TargetFunction]] internal</span></span><br><span class="line">        <span class="comment">//   property.</span></span><br><span class="line">        <span class="comment">// 4. Let args be a new list containing the same values as the</span></span><br><span class="line">        <span class="comment">//   list boundArgs in the same order followed by the same</span></span><br><span class="line">        <span class="comment">//   values as the list ExtraArgs in the same order.</span></span><br><span class="line">        <span class="comment">// 5. Return the result of calling the [[Call]] internal method</span></span><br><span class="line">        <span class="comment">//   of target providing boundThis as the this value and</span></span><br><span class="line">        <span class="comment">//   providing args as the arguments.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// equiv: target.call(this, ...boundArgs, ...args)</span></span><br><span class="line">        <span class="keyword">return</span> apply.call(target, that, array_concat.call(args, array_slice.call(<span class="built_in">arguments</span>)));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 15. If the [[Class]] internal property of Target is "Function", then</span></span><br><span class="line">    <span class="comment">//     a. Let L be the length property of Target minus the length of A.</span></span><br><span class="line">    <span class="comment">//     b. Set the length own property of F to either 0 or L, whichever is</span></span><br><span class="line">    <span class="comment">//       larger.</span></span><br><span class="line">    <span class="comment">// 16. Else set the length own property of F to 0.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> boundLength = max(<span class="number">0</span>, target.length - args.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 17. Set the attributes of the length own property of F to the values</span></span><br><span class="line">    <span class="comment">//   specified in 15.3.5.1.</span></span><br><span class="line">    <span class="keyword">var</span> boundArgs = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; boundLength; i++) &#123;</span><br><span class="line">      array_push.call(boundArgs, <span class="string">'$'</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// XXX Build a dynamic function with desired amount of arguments is the only</span></span><br><span class="line">    <span class="comment">// way to set the length property of a function.</span></span><br><span class="line">    <span class="comment">// In environments where Content Security Policies enabled (Chrome extensions,</span></span><br><span class="line">    <span class="comment">// for ex.) all use of eval or Function costructor throws an exception.</span></span><br><span class="line">    <span class="comment">// However in all of these environments Function.prototype.bind exists</span></span><br><span class="line">    <span class="comment">// and so this code will never be executed.</span></span><br><span class="line">    bound = $<span class="built_in">Function</span>(</span><br><span class="line">      <span class="string">'binder'</span>,</span><br><span class="line">      <span class="string">'return function ('</span> + array_join.call(boundArgs, <span class="string">','</span>) + <span class="string">')&#123; return binder.apply(this, arguments); &#125;'</span></span><br><span class="line">    )(binder);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (target.prototype) &#123;</span><br><span class="line">      Empty.prototype = target.prototype;</span><br><span class="line">      bound.prototype = <span class="keyword">new</span> Empty();</span><br><span class="line">      <span class="comment">// Clean up dangling references.</span></span><br><span class="line">      Empty.prototype = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="comment">// 18. Set the [[Extensible]] internal property of F to true.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="comment">// 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).</span></span><br><span class="line">    <span class="comment">// 20. Call the [[DefineOwnProperty]] internal method of F with</span></span><br><span class="line">    <span class="comment">//   arguments "caller", PropertyDescriptor &#123;[[Get]]: thrower, [[Set]]:</span></span><br><span class="line">    <span class="comment">//   thrower, [[Enumerable]]: false, [[Configurable]]: false&#125;, and</span></span><br><span class="line">    <span class="comment">//   false.</span></span><br><span class="line">    <span class="comment">// 21. Call the [[DefineOwnProperty]] internal method of F with</span></span><br><span class="line">    <span class="comment">//   arguments "arguments", PropertyDescriptor &#123;[[Get]]: thrower,</span></span><br><span class="line">    <span class="comment">//   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false&#125;,</span></span><br><span class="line">    <span class="comment">//   and false.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="comment">// NOTE Function objects created using Function.prototype.bind do not</span></span><br><span class="line">    <span class="comment">// have a prototype property or the [[Code]], [[FormalParameters]], and</span></span><br><span class="line">    <span class="comment">// [[Scope]] internal properties.</span></span><br><span class="line">    <span class="comment">// XXX can't delete prototype in pure-js.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 22. Return F.</span></span><br><span class="line">    <span class="keyword">return</span> bound;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç”±äºè¿™ä¸ªåº“æ˜¯ç”¨æ¥å…¼å®¹ ES5 çš„ï¼Œæ‰€ä»¥æ²¡æœ‰ç”¨ ES6 çš„ <strong>new.target</strong> è€Œæ˜¯ç”¨ <strong>instanceOf</strong> æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ä½¿ç”¨ new æ¥è°ƒç”¨çš„ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨ ES6 çš„ Object.defineProperty æˆ–è€… Object.definePropertyiesã€‚å¯ä»¥çœ‹åˆ°å®˜æ–¹æºä»£ç ä¸­çš„æ³¨é‡Šè¿˜æ˜¯å¾ˆè¯¦ç»†æ¸…æ™°çš„ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œç ”ç©¶ä¸€ä¸‹ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºæ¥ã€‚</p><h2 id="å‡ ä¸ªç–‘é—®"><a href="#å‡ ä¸ªç–‘é—®" class="headerlink" title="å‡ ä¸ªç–‘é—®"></a>å‡ ä¸ªç–‘é—®</h2><h3 id="ä½¿ç”¨-bind-å¤šæ¬¡ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œåç»­çš„ç»‘å®šèƒ½ç”Ÿæ•ˆå—ï¼Ÿ"><a href="#ä½¿ç”¨-bind-å¤šæ¬¡ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œåç»­çš„ç»‘å®šèƒ½ç”Ÿæ•ˆå—ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ bind å¤šæ¬¡ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œåç»­çš„ç»‘å®šèƒ½ç”Ÿæ•ˆå—ï¼Ÿ"></a>ä½¿ç”¨ bind å¤šæ¬¡ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œåç»­çš„ç»‘å®šèƒ½ç”Ÿæ•ˆå—ï¼Ÿ</h3><p>ä¸èƒ½ï¼Œè¢«ç»‘å®šåï¼Œåç»­å†æ¬¡ä½¿ç”¨ bind ç»‘å®šæ²¡æœ‰ä½œç”¨ã€‚æœ€åæ‰§è¡Œå‡½æ•° fn æ—¶ï¼Œthis å§‹ç»ˆæ—¶è¢«æŒ‡å‘ç¬¬ä¸€æ¬¡ bind æ—¶çš„ thisArgã€‚</p><h3 id="ä½¿ç”¨-bind-ç»‘å®šå‡½æ•°-this-åï¼Œå¯ä»¥ä½¿ç”¨-callï¼Œapply-æ”¹å˜å‡½æ•°çš„æŒ‡å‘å—ï¼Ÿ"><a href="#ä½¿ç”¨-bind-ç»‘å®šå‡½æ•°-this-åï¼Œå¯ä»¥ä½¿ç”¨-callï¼Œapply-æ”¹å˜å‡½æ•°çš„æŒ‡å‘å—ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ bind ç»‘å®šå‡½æ•° this åï¼Œå¯ä»¥ä½¿ç”¨ callï¼Œapply æ”¹å˜å‡½æ•°çš„æŒ‡å‘å—ï¼Ÿ"></a>ä½¿ç”¨ bind ç»‘å®šå‡½æ•° this åï¼Œå¯ä»¥ä½¿ç”¨ callï¼Œapply æ”¹å˜å‡½æ•°çš„æŒ‡å‘å—ï¼Ÿ</h3><p>ä¸èƒ½ï¼ŒåŸå› å’Œä¸Šé¢ä¸€æ ·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> boundTest = test.bind(&#123; <span class="attr">name</span>: <span class="string">'ly'</span> &#125;);</span><br><span class="line">boundTest(); <span class="comment">// =&gt; &#123; name: 'ly' &#125;</span></span><br><span class="line"></span><br><span class="line">boundTest = boundTest.bind(&#123; <span class="attr">name</span>: <span class="string">'dongdong'</span> &#125;);</span><br><span class="line">boundTest(); <span class="comment">// =&gt; &#123; name: 'ly' &#125;</span></span><br><span class="line"></span><br><span class="line">boundTest.call(&#123; <span class="attr">name</span>: <span class="string">'yinyin'</span> &#125;); <span class="comment">// =&gt; &#123; name: 'ly' &#125;</span></span><br></pre></td></tr></table></figure><p>å…¶å®æœ€è¿‘çœ‹è¿‡æœ‰äº›å…¬å¸å‰ç«¯é¢è¯•è¿˜è€ƒäº†åå‡½æ•°çš„çŸ¥è¯†ï¼Œå…¶å®ä¹Ÿç”¨åˆ°äº† bindã€‚è¿™é‡Œæˆ‘ä¸æ‰“ç®—è®²åå‡½æ•°äº†ï¼Œåå‡½æ•°æˆ‘æœ‰ç©ºå†å†™ä¸€ç¯‡æ–‡ç« å•ç‹¬è®²ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ol><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8wMGRjNGFkOWI4M2Y=" title="https://www.jianshu.com/p/00dc4ad9b83f">JavaScript ä¸­çš„ callã€applyã€bind æ·±å…¥ç†è§£<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzgxM2FhNWYyNjVkYTJkZDk0Y2Q3YzI=" title="https://juejin.im/post/5c813aa5f265da2dd94cd7c2">å½»åº•å¼„æ¸… this call apply bind ä»¥åŠåŸç”Ÿå®ç°<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YmVjNDE4M2YyNjVkYTYxNmIxMDQ0ZDc=" title="https://juejin.im/post/5bec4183f265da616b1044d7">é¢è¯•å®˜é—®ï¼šèƒ½å¦æ¨¡æ‹Ÿå®ç° JS çš„ bind æ–¹æ³•<i class="fa fa-external-link"></i></span></li></ol><p>å¦‚æœæ–‡ç« å†…å®¹æœ‰ä»€ä¹ˆé”™è¯¯æˆ–è€…ä¸å½“ä¹‹å¤„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡å‡ºã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©æˆ–è€…å¯å‘ï¼Œä¸å¦¨ç‚¹ä¸ªèµï¼Œå…³æ³¨ä¸€ä¸‹å‘—ã€‚</p><p>æœ¬æ–‡ä¸ºåŸåˆ›å†…å®¹ï¼Œé¦–å‘äº<span class="exturl" data-url="aHR0cDovL3d3dy5seXJlYWw2NjYuY29t" title="http://www.lyreal666.com">ä¸ªäººåšå®¢<i class="fa fa-external-link"></i></span>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></div><p style="text-align:center">ï¼ˆå®Œï¼‰</p><footer class="post-footer"><div class="post-tags"><a href="/tags/javascript/" rel="tag"><i class="fa fa-tag"></i> javascript</a></div><div class="post-nav"><div class="post-nav-item"><a href="/%E9%80%9A%E8%BF%87-koa2-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E8%B7%B5%E6%8E%A2%E7%A9%B6%E6%B5%8F%E8%A7%88%E5%99%A8HTTP%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" rel="prev" title="é€šè¿‡ koa2 æœåŠ¡å™¨å®è·µæ¢ç©¶æµè§ˆå™¨ HTTP ç¼“å­˜æœºåˆ¶"><i class="fa fa-chevron-left"></i> é€šè¿‡ koa2 æœåŠ¡å™¨å®è·µæ¢ç©¶æµè§ˆå™¨ HTTP ç¼“å­˜æœºåˆ¶</a></div><div class="post-nav-item"><a href="/%E5%85%A8%E9%9D%A2%E6%80%BB%E7%BB%93-JavaScript-%E7%B1%BB%E5%9E%8B%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/" rel="next" title="å…¨é¢æ€»ç»“ JavaScript ç±»å‹ç›¸å…³çŸ¥è¯†ç‚¹">å…¨é¢æ€»ç»“ JavaScript ç±»å‹ç›¸å…³çŸ¥è¯†ç‚¹ <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><script>window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#æ”¹å˜å‡½æ•°ä¸­-this-æŒ‡å‘çš„ä¸‰å…„å¼Ÿ"><span class="nav-number">1.</span> <span class="nav-text">æ”¹å˜å‡½æ•°ä¸­ this æŒ‡å‘çš„ä¸‰å…„å¼Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#call"><span class="nav-number">1.1.</span> <span class="nav-text">call</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apply"><span class="nav-number">1.2.</span> <span class="nav-text">apply</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bind"><span class="nav-number">1.3.</span> <span class="nav-text">bind</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å­¦ä»¥è‡´ç”¨"><span class="nav-number">2.</span> <span class="nav-text">å­¦ä»¥è‡´ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤šå‚å‡½æ•°è½¬æ¢ä¸ºå•ä¸ªæ•°ç»„å‚æ•°è°ƒç”¨"><span class="nav-number">2.1.</span> <span class="nav-text">å¤šå‚å‡½æ•°è½¬æ¢ä¸ºå•ä¸ªæ•°ç»„å‚æ•°è°ƒç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å°†ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„"><span class="nav-number">2.2.</span> <span class="nav-text">å°†ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»„åˆç»§æ‰¿"><span class="nav-number">2.3.</span> <span class="nav-text">ç»„åˆç»§æ‰¿</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è‡ªå·±å®ç°-callï¼Œapplyï¼Œbind"><span class="nav-number">3.</span> <span class="nav-text">è‡ªå·±å®ç° callï¼Œapplyï¼Œbind</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#call-1"><span class="nav-number">3.1.</span> <span class="nav-text">call</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ–¹å¼ä¸€"><span class="nav-number">3.1.1.</span> <span class="nav-text">æ–¹å¼ä¸€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ–¹å¼äºŒ"><span class="nav-number">3.1.2.</span> <span class="nav-text">æ–¹å¼äºŒ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Function-prototype-toString"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">Function.prototype.toString</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#eval"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">eval</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#åŠ¨æ‰‹å®ç°"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">åŠ¨æ‰‹å®ç°</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apply-1"><span class="nav-number">3.2.</span> <span class="nav-text">apply</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bind-1"><span class="nav-number">3.3.</span> <span class="nav-text">bind</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#new-çš„å®ç°åŸç†"><span class="nav-number">3.3.1.</span> <span class="nav-text">new çš„å®ç°åŸç†</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åŒºåˆ†å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡-new-è°ƒç”¨"><span class="nav-number">3.3.2.</span> <span class="nav-text">åŒºåˆ†å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡ new è°ƒç”¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¤„ç†åŸå‹é“¾"><span class="nav-number">3.3.3.</span> <span class="nav-text">å¤„ç†åŸå‹é“¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å®Œå–„ä¸€äº›ç»†èŠ‚"><span class="nav-number">3.3.4.</span> <span class="nav-text">å®Œå–„ä¸€äº›ç»†èŠ‚</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‡ ä¸ªç–‘é—®"><span class="nav-number">4.</span> <span class="nav-text">å‡ ä¸ªç–‘é—®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨-bind-å¤šæ¬¡ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œåç»­çš„ç»‘å®šèƒ½ç”Ÿæ•ˆå—ï¼Ÿ"><span class="nav-number">4.1.</span> <span class="nav-text">ä½¿ç”¨ bind å¤šæ¬¡ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œåç»­çš„ç»‘å®šèƒ½ç”Ÿæ•ˆå—ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨-bind-ç»‘å®šå‡½æ•°-this-åï¼Œå¯ä»¥ä½¿ç”¨-callï¼Œapply-æ”¹å˜å‡½æ•°çš„æŒ‡å‘å—ï¼Ÿ"><span class="nav-number">4.2.</span> <span class="nav-text">ä½¿ç”¨ bind ç»‘å®šå‡½æ•° this åï¼Œå¯ä»¥ä½¿ç”¨ callï¼Œapply æ”¹å˜å‡½æ•°çš„æŒ‡å‘å—ï¼Ÿ</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="ä½™è…¾é–" src="/images/avatar.png"><p class="site-author-name" itemprop="name">ä½™è…¾é–</p><div class="site-description" itemprop="description">æ€»ç»“å’Œåˆ†äº«æˆ‘çš„æ‰€å­¦æ‰€æ€</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS95dS10ZW5nLWppbmcvYWN0aXZpdGllcw==" title="çŸ¥ä¹ â†’ https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;yu-teng-jing&#x2F;activities"><i class="fa fa-fw fa-bookmark"></i>çŸ¥ä¹</span> </span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vdXNlci81YWQwZGNhYTZmYjlhMDI4ZDkzNzk0Yjk=" title="æ˜é‡‘ â†’ https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;5ad0dcaa6fb9a028d93794b9"><i class="fa fa-fw fa-book"></i>æ˜é‡‘</span> </span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RqeDY2Ng==" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;tjx666"><i class="fa fa-fw fa-github"></i>GitHub</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnl0ajI3MTMxNTE3MTNAZ21haWwuY29t" title="E-Mail â†’ mailto:ytj2713151713@gmail.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</span> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 â€“ <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">ä½™è…¾é–</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="æ€»è®¿å®¢é‡"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="æ€»è®¿é—®é‡"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme: 'forest',
      logLevel: 3,
      flowchart: { curve: 'linear' },
      gantt: { axisFormat: '%m/%d/%Y' },
      sequence: { actorMargin: 50 }
    });
  }, window.mermaid);
}</script></body></html>